importScripts("https://cdn.jsdelivr.net/npm/workbox-cdn@5.1.3/workbox/workbox-sw.js");workbox.setConfig({modulePathPrefix:"https://cdn.jsdelivr.net/npm/workbox-cdn@5.1.3/workbox/"});const{core:core,precaching:precaching,routing:routing,strategies:strategies,expiration:expiration,cacheableResponse:cacheableResponse,backgroundSync:backgroundSync,googleAnalytics:googleAnalytics}=workbox;const{CacheFirst:CacheFirst,NetworkFirst:NetworkFirst,NetworkOnly:NetworkOnly,StaleWhileRevalidate:StaleWhileRevalidate}=strategies;const{ExpirationPlugin:ExpirationPlugin}=expiration;const{CacheableResponsePlugin:CacheableResponsePlugin}=cacheableResponse;const cacheSuffixVersion="-210825",maxEntries=100;core.setCacheNameDetails({prefix:"baoshuo-blog",suffix:cacheSuffixVersion});core.skipWaiting();core.clientsClaim();precaching.cleanupOutdatedCaches();precaching.precacheAndRoute([{url:"https://cdn.jsdelivr.net/npm/disqusjs@1.3.0/dist/disqus.js",revision:null},{url:"https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css",revision:null},{url:"https://cdn.jsdelivr.net/npm/cfga@1.0.3/cfga.min.js",revision:null},{url:"https://cdn.jsdelivr.net/npm/instant.page@5.1.0/instantpage.min.js",revision:null},{url:"https://cdn.jsdelivr.net/npm/@nishanths/zoom.js@3.1.0/dist/zoom.min.js",revision:null}]);routing.registerRoute(/.*cdn\.jsdelivr\.net/,new CacheFirst({cacheName:"static-immutable"+cacheSuffixVersion,fetchOptions:{mode:"cors",credentials:"omit"},plugins:[new ExpirationPlugin({maxAgeSeconds:30*24*60*60,purgeOnQuotaError:true})]}));routing.registerRoute(/.*(?:i|vip1|vip2)\.loli\.(?:io|net)/,new CacheFirst({cacheName:"img-cache"+cacheSuffixVersion,fetchOptions:{mode:"cors",credentials:"omit"},plugins:[new ExpirationPlugin({maxAgeSeconds:30*24*60*60,purgeOnQuotaError:true})]}));routing.registerRoute(new RegExp("https://api.baoshuo.ren/cfga/"),new NetworkOnly({plugins:[new backgroundSync.BackgroundSyncPlugin("Optical_Collect",{maxRetentionTime:12*60})]}));googleAnalytics.initialize();routing.registerRoute(new RegExp("https://api.baoshuo.ren/disqus/"),new NetworkFirst({cacheName:"dsqjs-api"+cacheSuffixVersion,fetchOptions:{mode:"cors",credentials:"omit"},networkTimeoutSeconds:3}));routing.registerRoute(new RegExp("^https://(.*)disqus.com"),new NetworkOnly);routing.registerRoute(new RegExp("^https://(.*)disquscdn.com(.*)"),new NetworkOnly);routing.registerRoute(new RegExp("^https://friends.baoshuo.ren(.*)(png|jpg|jpeg|svg|gif)"),new StaleWhileRevalidate({cacheName:"img-cache"+cacheSuffixVersion,fetchOptions:{mode:"cors",credentials:"omit"}}));routing.registerRoute(new RegExp("https://friends.baoshuo.ren/links.json"),new StaleWhileRevalidate);routing.registerRoute(/.*\.(?:png|jpg|jpeg|svg|gif|webp)/,new StaleWhileRevalidate);routing.registerRoute(/.*\.(css|js)/,new StaleWhileRevalidate);routing.registerRoute("/sw.js",new StaleWhileRevalidate);routing.setDefaultHandler(new NetworkFirst({networkTimeoutSeconds:3}));