<?xml version="1.0"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://blog.baoshuo.ren</id>
    <title>宝硕博客 • Posts by &#34;随笔&#34; category</title>
    <link href="https://blog.baoshuo.ren" />
    <updated>2020-11-28T13:39:32.000Z</updated>
    <category term="BIRD" />
    <category term="BGP" />
    <category term="算法" />
    <category term="图论" />
    <category term="笔记" />
    <category term="Web" />
    <category term="CTF" />
    <category term="DN42" />
    <category term="Git" />
    <category term="折腾" />
    <category term="Linux" />
    <category term="网络" />
    <category term="题解" />
    <category term="洛谷" />
    <category term="游记" />
    <category term="牛客网" />
    <category term="S2OJ" />
    <category term="macOS" />
    <category term="Cloudflare" />
    <category term="前端" />
    <category term="比赛" />
    <category term="VMware" />
    <category term="OI" />
    <category term="ServiceWorker" />
    <category term="JavaScript" />
    <entry>
        <id>https://blog.baoshuo.ren/post/download-smms-image/</id>
        <title>【随笔】下载自己在 SM.MS 图床上的所有图片</title>
        <link rel="alternate" href="https://blog.baoshuo.ren/post/download-smms-image/"/>
        <content type="html">&lt;p&gt;前提条件：有 &lt;a href=&#34;http://SM.MS&#34;&gt;SM.MS&lt;/a&gt; 图床账号，并且图片存储在该账号下。&lt;/p&gt;
&lt;p&gt;思路：先请求API，获取图片列表。遍历列表，判断本地是否存在该图片，若不存在则下载该图片。&lt;/p&gt;
&lt;p&gt;代码如下。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;highlight python&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;import&lt;/span&gt; requests
&lt;span class=&#34;keyword&#34;&gt;import&lt;/span&gt; os
&lt;span class=&#34;keyword&#34;&gt;import&lt;/span&gt; json
&lt;span class=&#34;keyword&#34;&gt;import&lt;/span&gt; pathlib
&lt;span class=&#34;keyword&#34;&gt;import&lt;/span&gt; sys

&lt;span class=&#34;function&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;getUploadedImages&lt;/span&gt;(&lt;span class=&#34;params&#34;&gt;token&lt;/span&gt;) -&amp;gt; &lt;span class=&#34;built_in&#34;&gt;str&lt;/span&gt;:&lt;/span&gt;
    url = &lt;span class=&#34;string&#34;&gt;&amp;quot;https://sm.ms/api/v2/upload_history&amp;quot;&lt;/span&gt;
    headers = &amp;#123;&lt;span class=&#34;string&#34;&gt;&amp;quot;Authorization&amp;quot;&lt;/span&gt;: token&amp;#125;
    &lt;span class=&#34;keyword&#34;&gt;return&lt;/span&gt; requests.get(url, headers=headers).text

data = json.loads(getUploadedImages(sys.argv[&lt;span class=&#34;number&#34;&gt;1&lt;/span&gt;]))

&lt;span class=&#34;keyword&#34;&gt;for&lt;/span&gt; img &lt;span class=&#34;keyword&#34;&gt;in&lt;/span&gt; data[&lt;span class=&#34;string&#34;&gt;&amp;quot;data&amp;quot;&lt;/span&gt;]:
    path = &lt;span class=&#34;string&#34;&gt;&amp;quot;./data/&amp;quot;&lt;/span&gt; + img[&lt;span class=&#34;string&#34;&gt;&amp;quot;storename&amp;quot;&lt;/span&gt;]
    &lt;span class=&#34;keyword&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;not&lt;/span&gt; pathlib.Path(path).is_file():
        pic = requests.get(img[&lt;span class=&#34;string&#34;&gt;&amp;quot;url&amp;quot;&lt;/span&gt;]).content
        f = &lt;span class=&#34;built_in&#34;&gt;open&lt;/span&gt;(path, &lt;span class=&#34;string&#34;&gt;&amp;quot;wb&amp;quot;&lt;/span&gt;)
        f.write(pic)
        f.close()
        &lt;span class=&#34;keyword&#34;&gt;del&lt;/span&gt; pic
        &lt;span class=&#34;built_in&#34;&gt;print&lt;/span&gt;(&lt;span class=&#34;string&#34;&gt;&amp;quot;Successfully get &amp;quot;&lt;/span&gt;+img[&lt;span class=&#34;string&#34;&gt;&amp;quot;storename&amp;quot;&lt;/span&gt;]+&lt;span class=&#34;string&#34;&gt;&amp;quot; .&amp;quot;&lt;/span&gt;)
    &lt;span class=&#34;keyword&#34;&gt;else&lt;/span&gt;:
        &lt;span class=&#34;built_in&#34;&gt;print&lt;/span&gt;(&lt;span class=&#34;string&#34;&gt;&amp;quot;&amp;quot;&lt;/span&gt;+img[&lt;span class=&#34;string&#34;&gt;&amp;quot;storename&amp;quot;&lt;/span&gt;]+&lt;span class=&#34;string&#34;&gt;&amp;quot; is already exists.&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;使用方法：&lt;code&gt;python3 smms-image.py &amp;quot;[your token here]&amp;quot;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;下载下来的图片会存到 &lt;code&gt;./data/&lt;/code&gt; 目录下（请提前新建）。&lt;/p&gt;
</content>
        <updated>2020-11-28T13:39:32.000Z</updated>
    </entry>
    <entry>
        <id>https://blog.baoshuo.ren/post/change-git-submission-email/</id>
        <title>批量修改 Git 仓库的提交邮箱</title>
        <link rel="alternate" href="https://blog.baoshuo.ren/post/change-git-submission-email/"/>
        <content type="html">&lt;p&gt;这几天重装了系统，一个不小心提交了好多 author 为 &lt;code&gt;&amp;quot;root&amp;quot;&amp;lt;root@localhost&amp;gt;&lt;/code&gt; 的 commit ，于是寻找到了一个修改的方法。&lt;/p&gt;
&lt;p&gt;在仓库根目录下新建一个名为 &lt;code&gt;fix.sh&lt;/code&gt; 的 shell 脚本，输入以下内容：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;highlight bash&#34;&gt;&lt;span class=&#34;meta&#34;&gt;#!/bin/bash&lt;/span&gt;
 
git filter-branch --env-filter &lt;span class=&#34;string&#34;&gt;&amp;#x27;&lt;/span&gt;
&lt;span class=&#34;string&#34;&gt;an=&amp;quot;$GIT_AUTHOR_NAME&amp;quot;&lt;/span&gt;
&lt;span class=&#34;string&#34;&gt;am=&amp;quot;$GIT_AUTHOR_EMAIL&amp;quot;&lt;/span&gt;
&lt;span class=&#34;string&#34;&gt;cn=&amp;quot;$GIT_COMMITTER_NAME&amp;quot;&lt;/span&gt;
&lt;span class=&#34;string&#34;&gt;cm=&amp;quot;$GIT_COMMITTER_EMAIL&amp;quot;&lt;/span&gt;
&lt;span class=&#34;string&#34;&gt; &lt;/span&gt;
&lt;span class=&#34;string&#34;&gt;if [ &amp;quot;$GIT_COMMITTER_EMAIL&amp;quot; = &amp;quot;错误邮箱&amp;quot; ]&lt;/span&gt;
&lt;span class=&#34;string&#34;&gt;then&lt;/span&gt;
&lt;span class=&#34;string&#34;&gt;    cn=&amp;quot;正确名称&amp;quot;&lt;/span&gt;
&lt;span class=&#34;string&#34;&gt;    cm=&amp;quot;正确邮箱&amp;quot;&lt;/span&gt;
&lt;span class=&#34;string&#34;&gt;fi&lt;/span&gt;
&lt;span class=&#34;string&#34;&gt;if [ &amp;quot;$GIT_AUTHOR_EMAIL&amp;quot; = &amp;quot;错误邮箱&amp;quot; ]&lt;/span&gt;
&lt;span class=&#34;string&#34;&gt;then&lt;/span&gt;
&lt;span class=&#34;string&#34;&gt;    an=&amp;quot;正确名称&amp;quot;&lt;/span&gt;
&lt;span class=&#34;string&#34;&gt;    am=&amp;quot;正确邮箱&amp;quot;&lt;/span&gt;
&lt;span class=&#34;string&#34;&gt;fi&lt;/span&gt;
&lt;span class=&#34;string&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;string&#34;&gt;export GIT_AUTHOR_NAME=&amp;quot;$an&amp;quot;&lt;/span&gt;
&lt;span class=&#34;string&#34;&gt;export GIT_AUTHOR_EMAIL=&amp;quot;$am&amp;quot;&lt;/span&gt;
&lt;span class=&#34;string&#34;&gt;export GIT_COMMITTER_NAME=&amp;quot;$cn&amp;quot;&lt;/span&gt;
&lt;span class=&#34;string&#34;&gt;export GIT_COMMITTER_EMAIL=&amp;quot;$cm&amp;quot;&lt;/span&gt;
&lt;span class=&#34;string&#34;&gt;&amp;#x27;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;完成后运行 &lt;code&gt;./fix.sh&lt;/code&gt; 即可。&lt;/p&gt;
&lt;p&gt;PS: 跑完记得删脚本，或者直接把脚本内容改好之后拖进终端&lt;/p&gt;
</content>
        <category term="Git" />
        <updated>2020-11-25T12:03:03.000Z</updated>
    </entry>
    <entry>
        <id>https://blog.baoshuo.ren/post/tencent-cloud-cvm-dual-ip/</id>
        <title>给腾讯云服务器免费增加第二个 IP</title>
        <link rel="alternate" href="https://blog.baoshuo.ren/post/tencent-cloud-cvm-dual-ip/"/>
        <content type="html">&lt;h2 id=&#34;前言&#34;&gt;前言&lt;/h2&gt;
&lt;p&gt;良心云果然是良心云，增加了一个IP四舍五入居然不要钱，不过还是要登进系统配置一下双IP的。&lt;/p&gt;
&lt;a id=&#34;more&#34;&gt;&lt;/a&gt;
&lt;p&gt;&lt;img src=&#34;https://vip2.loli.io/2020/11/26/rAyvBmDw2bdMP6t.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34; data-action=&#34;zoom&#34;&gt;&lt;/p&gt;
&lt;p&gt;和客服的对话&lt;/p&gt;
&lt;h2 id=&#34;增加网卡-公网IP&#34;&gt;增加网卡&amp;amp;公网IP&lt;/h2&gt;
&lt;p&gt;&lt;img src=&#34;https://vip2.loli.io/2020/11/26/SWwlbLRaHACnuBz.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34; data-action=&#34;zoom&#34;&gt;&lt;/p&gt;
&lt;p&gt;点击按钮新建一个弹性网卡并绑定&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://vip1.loli.io/2020/11/26/sJqBfdbv4eRzZFm.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34; data-action=&#34;zoom&#34;&gt;&lt;/p&gt;
&lt;p&gt;绑定完以后可以在服务器的弹性网卡管理页面看到详情&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://vip1.loli.io/2020/11/26/ivPFgfH69XTCo8Z.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34; data-action=&#34;zoom&#34;&gt;&lt;/p&gt;
&lt;p&gt;点击新建的弹性网卡，进入管理页面，并记录下这张网卡的&lt;strong&gt;内网IP&lt;/strong&gt;，稍后会用到&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://vip1.loli.io/2020/11/26/FAy8U5lpzNtuMTi.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34; data-action=&#34;zoom&#34;&gt;&lt;/p&gt;
&lt;p&gt;点击绑定按钮，并申请一个弹性公网IP&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://vip2.loli.io/2020/11/26/AbZ4vTwr1UCdz2n.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34; data-action=&#34;zoom&#34;&gt;
&lt;img src=&#34;https://vip2.loli.io/2020/11/26/2G5jsdTSZrocqwh.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34; data-action=&#34;zoom&#34;&gt;&lt;/p&gt;
&lt;p&gt;此时弹性公网IP已经绑定成功，并且可以看到已经变为不收取IP资源费的状态了&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://vip1.loli.io/2020/11/26/x8q7I5E2dMSDt4B.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34; data-action=&#34;zoom&#34;&gt;&lt;/p&gt;
&lt;p&gt;查看主网卡的&lt;strong&gt;内网IP&lt;/strong&gt;，并记录下这个IP，稍后会用到&lt;/p&gt;
&lt;h2 id=&#34;配置服务器的网络设置&#34;&gt;配置服务器的网络设置&lt;/h2&gt;
&lt;p&gt;使用 &lt;code&gt;ip addr&lt;/code&gt; 查看网卡名称，并记录下来&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://vip2.loli.io/2020/11/26/Ofh8CzvnYKPGsH7.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34; data-action=&#34;zoom&#34;&gt;&lt;/p&gt;
&lt;p&gt;切换到网卡配置文件目录&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;highlight bash&#34;&gt;&lt;span class=&#34;built_in&#34;&gt;cd&lt;/span&gt; /etc/sysconfig/network-scripts/&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;编辑 &lt;code&gt;ifcfg-eth0&lt;/code&gt; 文件，将下方内容修改后填入&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;highlight ini&#34;&gt;&lt;span class=&#34;attr&#34;&gt;DEVICE&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;&amp;quot;eth0&amp;quot;&lt;/span&gt;             &lt;span class=&#34;comment&#34;&gt;# 弹性网卡名称&lt;/span&gt;
&lt;span class=&#34;attr&#34;&gt;NM_CONTROLLED&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;&amp;quot;yes&amp;quot;&lt;/span&gt;       &lt;span class=&#34;comment&#34;&gt;# 是否由 Network Manager 控制该网络接口&lt;/span&gt;
&lt;span class=&#34;attr&#34;&gt;ONBOOT&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;&amp;quot;yes&amp;quot;&lt;/span&gt;              &lt;span class=&#34;comment&#34;&gt;# 系统启动时是否激活&lt;/span&gt;
&lt;span class=&#34;attr&#34;&gt;IPADDR&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;&amp;quot;172.21.0.10&amp;quot;&lt;/span&gt;      &lt;span class=&#34;comment&#34;&gt;# 弹性网卡上的 IP 地址&lt;/span&gt;
&lt;span class=&#34;attr&#34;&gt;NETMASK&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;&amp;quot;255.255.240.0&amp;quot;&lt;/span&gt;   &lt;span class=&#34;comment&#34;&gt;# 子网掩码&lt;/span&gt;
&lt;span class=&#34;attr&#34;&gt;GATEWAY&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;&amp;quot;172.21.0.1&amp;quot;&lt;/span&gt;      &lt;span class=&#34;comment&#34;&gt;# 网关&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;其中 &lt;code&gt;IPADDR&lt;/code&gt; 填写主网卡的&lt;strong&gt;内网IP&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;子网掩码可以使用 &lt;a href=&#34;https://www.v2ex.com/tools/ipv4&#34;&gt;V2EX 提供的 IPv4 子网查询工具&lt;/a&gt; 查询对应的子网。&lt;/li&gt;
&lt;li&gt;网关根据创建网卡时选择的子网而定。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;新建 &lt;code&gt;ifcfg-eth1&lt;/code&gt; 文件，将下方内容修改后填入&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;highlight ini&#34;&gt;&lt;span class=&#34;attr&#34;&gt;DEVICE&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;&amp;quot;eth1&amp;quot;&lt;/span&gt;             &lt;span class=&#34;comment&#34;&gt;# 需配置的弹性网卡名称（此处是新添加的网卡名称）&lt;/span&gt;
&lt;span class=&#34;attr&#34;&gt;NM_CONTROLLED&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;&amp;quot;yes&amp;quot;&lt;/span&gt;       &lt;span class=&#34;comment&#34;&gt;# 是否由 Network Manager 控制该网络接口&lt;/span&gt;
&lt;span class=&#34;attr&#34;&gt;ONBOOT&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;&amp;quot;yes&amp;quot;&lt;/span&gt;              &lt;span class=&#34;comment&#34;&gt;# 系统启动时是否激活&lt;/span&gt;
&lt;span class=&#34;attr&#34;&gt;IPADDR&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;&amp;quot;172.21.0.12&amp;quot;&lt;/span&gt;      &lt;span class=&#34;comment&#34;&gt;# 弹性网卡上的 IP 地址&lt;/span&gt;
&lt;span class=&#34;attr&#34;&gt;NETMASK&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;&amp;quot;255.255.240.0&amp;quot;&lt;/span&gt;   &lt;span class=&#34;comment&#34;&gt;# 子网掩码&lt;/span&gt;
&lt;span class=&#34;comment&#34;&gt;# GATEWAY=&amp;quot;172.21.0.1&amp;quot;    # 网关（若与eth0的网关不同，需要删除注释并修改为正确的网关）&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;其中 &lt;code&gt;IPADDR&lt;/code&gt; 填写新添加网卡的&lt;strong&gt;内网IP&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;子网掩码可以 &lt;a href=&#34;https://www.v2ex.com/tools/ipv4&#34;&gt;V2EX 提供的 IPv4 子网查询工具&lt;/a&gt; 查询对应的子网。&lt;/li&gt;
&lt;li&gt;网关根据创建网卡时选择的子网而定。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;保存后重启网络服务。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;highlight bash&#34;&gt;service network restart&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;https://vip1.loli.io/2020/11/26/ReBSM4C9oF2HbVi.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34; data-action=&#34;zoom&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;配置路由（可选）&#34;&gt;配置路由（可选）&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;按照上述步骤配置好后，Linux 还是默认都从主网卡发包。
您可通过策略路由让报文从哪个网卡进，并从该网卡返回。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;创建路由表&#34;&gt;创建路由表&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;highlight bash&#34;&gt;&lt;span class=&#34;built_in&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;&amp;quot;10 t1&amp;quot;&lt;/span&gt; &amp;gt;&amp;gt; /etc/iproute2/rt_tables
&lt;span class=&#34;built_in&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;&amp;quot;20 t2&amp;quot;&lt;/span&gt; &amp;gt;&amp;gt; /etc/iproute2/rt_tables&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;添加默认路由&#34;&gt;添加默认路由&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;highlight bash&#34;&gt;ip route add default dev eth0 via 172.21.0.1 table 10
ip route add default dev eth1 via 172.21.0.1 table 20&lt;/code&gt;&lt;/pre&gt;
&lt;blockquote&gt;
&lt;p&gt;上述两个命令中，172.21.0.1要分别替换成主网卡所属子网的网关，以及辅助网卡所属子网的网关。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;配置策略路由&#34;&gt;配置策略路由&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;highlight bash&#34;&gt;ip rule add from 172.21.0.10 table 10
ip rule add from 172.21.0.12 table 20&lt;/code&gt;&lt;/pre&gt;</content>
        <category term="Linux" />
        <category term="网络" />
        <updated>2020-08-20T05:22:47.000Z</updated>
    </entry>
    <entry>
        <id>https://blog.baoshuo.ren/post/clone-github-repo-faster/</id>
        <title>修改 Git 配置加速 clone GitHub 源码</title>
        <link rel="alternate" href="https://blog.baoshuo.ren/post/clone-github-repo-faster/"/>
        <content type="html">&lt;p&gt;设置代理：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;highlight bash&#34;&gt;&lt;span class=&#34;comment&#34;&gt;# socks5协议，1080端口修改成自己的本地代理端口&lt;/span&gt;
git config --global http.https://github.com.proxy  socks5://127.0.0.1:1080
git config --global https.https://github.com.proxy socks5://127.0.0.1:1080

&lt;span class=&#34;comment&#34;&gt;# http协议，7890端口修改成自己的本地代理端口&lt;/span&gt;
git config --global http.https://github.com.proxy  http://127.0.0.1:7890
git config --global https.https://github.com.proxy http://127.0.0.1:7890&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;之后运行 &lt;code&gt;git config -l&lt;/code&gt; 即可查看代理设置情况。&lt;/p&gt;
&lt;p&gt;清除代理：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;highlight shell&#34;&gt;git config --global --unset http.proxy
git config --global --unset https.proxy&lt;/code&gt;&lt;/pre&gt;</content>
        <category term="Git" />
        <updated>2020-07-21T10:38:23.000Z</updated>
    </entry>
</feed>