<!-- Style -->
<!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bsm@0.3.6/dist/css/post.css" inline> -->
<%- css('styles/post') %>
<%- css('styles/about') %>

<!-- <h1 class="title card flex"><%= page.title %></h1> -->

<% if(theme.show_feature && page.feature) { %>
    <img class="about-banner" src="<%= page.feature %>" crossorigin alt="<%= page.title %>" />
<% } %>
<div class="about card">
    <div class="about-img">
        <img class="author-avatar" src="<%- config.avatar %>">
    </div>
    <div class="author">
        <div class="author-name"><%- config.author %></div>
        <div class="author-slogan"><%- config.slogan %></div>
        <div class="author-info">
            <div class="author-info-item">
                <div class="author-count"><%- site.posts.length %></div>
                <div class="author-item">文章</div>
            </div>
            <div class="author-info-item">
                <div class="author-count"><%- site.categories.length %></div>
                <div class="author-item">分类</div>
            </div>
            <div class="author-info-item">
                <div class="author-count"><%- site.tags.length %></div>
                <div class="author-item">标签</div>
            </div>
            <% let symbolsResultTotal = symbolsTotal(site) %>
            <div class="author-info-item">
                <div class="author-count">
                    <%- symbolsResultTotal < 10000
                            ? Math.round(symbolsResultTotal / 1000)
                            : Math.round(symbolsResultTotal / 1000) / 10; %>
                </div>
                <div class="author-item">
                    <%- symbolsResultTotal < 10000 ? '千字' : '万字' %>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="content card" id="post-content">
    <%- page.content %>
</div>

<%- partial("_includes/disqus.ejs") %>

<div class="post-toc" id="post-toc">
    <div class="toc-label">
        <div>文章目录</div>
        <a href="javascript:;" id="post-toc-close">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" height="16" width="16">
                <path d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" fill="currentColor" />
            </svg>
        </a>
    </div>
    <%- toc(page.content,  { class: 'toc', list_number: false, max_depth: 4, min_depth: 2 }) %>
</div>

<!-- <script src="https://cdn.jsdelivr.net/npm/@nishanths/zoom.js@3.1.0/dist/zoom.min.js"></script> -->

<script>
    document.addEventListener('DOMContentLoaded', function() {
        document.getElementById('toc-btn').onclick = function() {
            document.getElementById('post-toc').classList.add('active');
        }
        document.getElementById('post-toc-close').onclick = function() {
            document.getElementById('post-toc').classList.remove('active');
        }
        Array.from(document.getElementsByClassName('toc-link')).forEach(function(element) {
            element.addEventListener('click', function(event) {
                document.getElementById('post-toc').classList.remove('active');
            })
        })
    });
</script>
